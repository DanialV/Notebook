myapp=angular.module("sadjad118",["root","add_phone","login","enroll","favorite","user_management","logs"]),myapp.config(["$routeProvider",function(e){e.otherwise({templateUrl:"error"})}]),myapp.controller("body_controller",["$scope","$route",function(e,t){e.toaster=toastr.options={closeButton:!0,debug:!1,newestOnTop:!0,progressBar:!0,positionClass:"toast-bottom-right",preventDuplicates:!0,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"2500",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},e.setActive=function(t){e.loginActive="",e.enrollActive="",e.addphoneActive="",e.favoriteActive="",e.usermanagementActive="",e.logsActive="",e[t+"Active"]="active"},e.condtions=null,e.stu_url="http://stu.sadjad.ac.ir",e.sepehr_url="http://sepehr.sadjad.ac.ir",e.pooya_url="http://pooya.sadjad.ac.ir",e.Header="جستجوی شماره تلفن",e.computer_center="http://sadjad.ac.ir/IT%20center.aspx",e.HeaderName=function(t){e.Header=t},e.logout=function(){window.location="/logout"}}]);
_login=angular.module("login",["ngRoute"]),_login.config(["$routeProvider",function(o){o.when("/login",{templateUrl:"login",controller:["$scope","$http","$timeout",function(o,e,t){o.setActive("login"),o.HeaderName("ورود"),o.body="fade-handel",o.header="fade-handel",o.user={},o.onsubmit=function(){e({method:"POST",url:"/login",data:o.user}).success(function(o){1==o?(toastr.success("خوش آمدید.","ثبت"),t(function(){window.location.replace("/")},500)):0==o&&toastr.error("نام کاربری یا رمز عبور اشتباه است.","خطا")}).error(function(o){toastr.error("اشکال داخلی سرور","خطا")})},o.onforgot=function(){e({url:"/forget_password",type:"post",data:{email:o.forget_email}}).success(function(o){toastr.succes("لینک بازیابی اطلاعات با موفقیت به ایمیل شما ارسال شد.")}).error(function(o){})}}]})}]);
_root=angular.module("root",["ngRoute","angularSpinner"]),_root.config(["$routeProvider",function(e){e.when("/",{templateUrl:"main_content",controller:["$scope","$http","usSpinnerService",function(e,r,n){e.setActive(""),e.HeaderName("جستجوی شماره تلفن"),e.body="fade-handel",e.header="fade-handel",e._data={},e._data.search="",e.query=[],e.edit_form={},e._edit_form={},e.delete_row=!0,n.stop("spinner"),e.onsubmit=function(){e.delete_row=!0,n.stop("spinner"),"undefined"!=typeof e._data.search&&(n.spin("spinner"),r({method:"POST",url:"/",data:e._data}).success(function(r){n.stop("spinner"),e.query=r}).error(function(e){n.stop("spinner"),toastr.error("اشکال داخلی سرور","خطا")}))},e.onedit=function(r){e._edit_form=r,e.edit_form.name=r.name,e.edit_form.departmenet=r.departmenet,e.edit_form.phone_number=r.phone_number,e.edit_form.inside_phone_number=r.inside_phone_number,e.edit_form.email=r.email,e.edit_form.room_number=r.room_number,e.edit_form.finder=r._id},e.sendedit=function(){r({method:"post",url:"/editnumber",data:e.edit_form}).success(function(){var r=e.query.indexOf(e._edit_form);e.query[r].name=e.edit_form.name,e.query[r].departmenet=e.edit_form.departmenet,e.query[r].phone_number=e.edit_form.phone_number,e.query[r].inside_phone_number=e.edit_form.inside_phone_number,e.query[r].email=e.edit_form.email,e.query[r].room_number=e.edit_form.room_number,document.getElementById("close").click(),toastr.info("تغییرات با موفقیت ثبت شد.","ویرایش")}).error(function(e){toastr.error("اشکال داخلی سرور","خطا")})},e.ondelete=function(n){r({method:"POST",url:"/deletenumber",data:n}).success(function(){var r=e.query.indexOf(n);e.query.splice(r,1),toastr.warning("شماره تلفن با موفقیت حذف شد.","حذف")}).error(function(){toastr.error("اشکال داخلی سرور","خطا")})},e.onfavorite=function(e){var n=e._id;r({url:"/favorite",method:"post",data:{id:n,type:"add"}}).success(function(e){e?toastr.info("شماره تلفن در لیست مورد علاقه ذخیره شد.","ثبت"):toastr.error("این شماره در لیست شما قرار دارد.","خطا")}).error(function(){toastr.error("اشکال داخلی سرور","خطا")})}}]})}]);
_add_phone=angular.module("add_phone",["ngRoute"]),_add_phone.config(["$routeProvider",function(e){e.when("/add_phone",{templateUrl:"add_phone",controller:["$scope","$http",function(e,r){e.setActive("addphone"),e.HeaderName("اضافه کردن شماره تلفن"),e.body="fade-handel",e.header="fade-handel",e.user={},e.onsubmit=function(){r({method:"POST",url:"/add_phone",data:e.user}).success(function(r){"ok"==r?(toastr.success("اطلاعات کاربر با موفقیت ثبت شد.","ثبت"),e.user.name="",e.user.departmenet="",e.user.phone_number="",e.user.inside_phone_number="",e.user.email="",e.user.room_number=""):"duplicate_name"==r?toastr.error("نام کاربر در سیستم موجود است.","خطا"):"duplicate_number"==r?toastr.error("شماره تلفن در سیستم موجود است.","خطا"):"duplicate_inside_number"==r&&toastr.error("شماره داخلی در سیستم موجود است.","خطا")}).error(function(e){toastr.error("اشکال داخلی سرور","خطا")})}}]})}]);
_enroll=angular.module("enroll",["ngRoute"]),_enroll.config(["$routeProvider",function(e){e.when("/enroll",{templateUrl:"enroll",controller:["$scope","$http",function(e,r){e.setActive("enroll"),e.HeaderName("ثبت نام"),e.body="fade-handel",e.header="fade-handel",e.user={},e.onsubmit=function(){r({method:"POST",url:"/enroll",data:e.user}).success(function(r){"ok"==r?(toastr.success("اطلاعات کاربر با موفقیت ثبت شد.","ثبت"),e.user.name="",e.user.last_name="",e.user.username="",e.user.email="",e.user.password=""):"duplicate_username"==r?toastr.error("نام کاربر در سیستم موجود است.","خطا"):"duplicate_email"==r&&toastr.error("پست الکرونیکی در سیستم موجود است","خطا")}).error(function(e){toastr.error("اشکال داخلی سرور","خطا")})}}]})}]);
_favorite=angular.module("favorite",["ngRoute"]),_favorite.config(["$routeProvider",function(e){e.when("/favorite",{templateUrl:"favorite",controller:["$scope","$http",function(e,t){e.setActive("favorite"),e.HeaderName("شماره های علاقمند"),e.body="fade-handel",e.header="fade-handel",t({url:"/favorite",method:"POST",data:{type:"get_data"}}).success(function(t){e.favoriteData=t}).error(function(){toastr.error("اشکال داخلی سرور","خطا")}),e.on_delete=function(r){t({url:"/delfavorite",method:"POST",data:r}).success(function(){var t=e.favoriteData.indexOf(r);e.favoriteData.splice(t,1),toastr.warning("شماره تلفن از لیست مورد علاقه حذف شد.","حذف")}).error(function(){toastr.error("اشکال داخلی سرور","خطا")})}}]})}]);
var user_management=angular.module("user_management",["ngRoute"]);user_management.config(["$routeProvider",function(e){e.when("/user_management",{templateUrl:"user_management",controller:["$scope","$http",function(e,r){e.setActive("usermanagement"),e.HeaderName("مدیریت کاربران"),e.body="fade-handel",e.header="fade-handel",e.user_data={},e.edit_user={},e._edit_user={},r({url:"/user_management",method:"POST",data:{}}).success(function(r){e.user_data=r}).error(function(e){toastr.error("اشکال داخلی سرور","خطا")}),e.on_change=function(r){e._edit_user=r,e.edit_user.first_name=r.first_name,e.edit_user.last_name=r.last_name,e.edit_user.username=r.username,e.edit_user.pervious_username=r.username,e.edit_user.email=r.email,e.edit_user.password="",e.edit_user.role=r.role.toString(),e.edit_user.repeat_password="",e.edit_user._id=r._id},e.password_check=function(){""==e.edit_user.password&&""==e.edit_user.repeat_password?e.password_validation="":e.edit_user.password==e.edit_user.repeat_password?e.password_validation="has-success":e.password_validation="has-error"},e.sendedit=function(){e.edit_user.password!=e.edit_user.repeat_password?toastr.error("رمز عبور و تکرار رمز عبور صحیح وارد نشده اند.","خطا"):r({url:"/edit_user",method:"POST",data:e.edit_user}).success(function(r){if("ok"==r){var s=e.user_data.indexOf(e._edit_user);e.user_data[s].first_name=e.edit_user.first_name,e.user_data[s].last_name=e.edit_user.last_name,e.user_data[s].email=e.edit_user.email,e.user_data[s].role=e.edit_user.role,e.user_data[s].username=e.edit_user.username,toastr.info("تغییرات با موفقیت ثبت شد.","ویرایش")}else"FError"==r?toastr.error("اطلاعات وارد شده قابل قبول نمی باشد.","خطا"):"UError"==r?toastr.error("نام کاربری در سیستم موجود است.","خطا"):"PError"==r&&toastr.error("رمز عبور مطابقت ندارد.","خطا")}).error(function(e){toastr.error("اشکال داخلی سرور","خطا")})},e.delete_user=function(s){r({url:"/deluser",method:"POST",data:s}).success(function(r){if("ok"==r){var a=e.user_data.indexOf(s);e.user_data.splice(a,1),toastr.warning("کاربر با موفقیت حذف شد.","حذف")}}).error(function(e){toastr.error("اشکال داخلی سرور","خطا")})}}]})}]);
logs=angular.module("logs",["ngRoute"]),logs.config(["$routeProvider",function(e){e.when("/logs",{templateUrl:"logs",controller:["$scope","$http",function(e,o){e.setActive("logs"),console.log("dad"),e.HeaderName("لاگ های سرور"),e.body="fade-handel",e.header="fade-handel",e.logs=""}]})}]);